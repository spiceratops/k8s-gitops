# Tinyauth Example Configuration

# The base URL where Tinyauth is accessible
appUrl: "https://tinyauth.${SECRET_DOMAIN}"
# Directory for static resources
resourcesDir: "./resources"
# Path to SQLite database file
databasePath: "./tinyauth.db"
# Disable usage analytics
disableAnalytics: true
# Disable static resource serving
disableResources: false
# Disable UI warning messages
disableUIWarnings: false

# Logging Configuration
log:
  # Log level: trace, debug, info, warn, error
  level: "info"
  json: false
  streams:
    app:
      enabled: true
      level: "warn"
    http:
      enabled: true
      level: "debug"
    audit:
      enabled: false
      level: "info"

# Server Configuration
server:
  # Port to listen on
  port: 3000
  # Interface to bind to (0.0.0.0 for all interfaces)
  address: "0.0.0.0"
  # Comma-separated list of trusted proxy IPs/CIDRs
  trustedProxies: "10.244.0.0/16"

# Authentication Configuration
auth:
  # Enable secure cookies (requires HTTPS)
  secureCookie: true
  # Session expiry in seconds (3600 = 1 hour)
  sessionExpiry: 604800
  # Session maximum lifetime in seconds (0 = unlimited)
  sessionMaxLifetime: 0
  # Login timeout in seconds (300 = 5 minutes)
  loginTimeout: 300
  # Maximum login retries before lockout
  loginMaxRetries: 3

# OAuth Configuration
oauth:
  # Regex pattern for allowed email addresses (e.g., /@example\.com$/)
  whitelist: ""
  # Provider ID to auto-redirect to (skips login page)
  autoRedirect: ""
  # OAuth Provider Configuration (replace myprovider with your provider name)
  providers:
    pocketid:
      authUrl: "https://id.${SECRET_DOMAIN}/authorize"
      tokenUrl: "https://id.${SECRET_DOMAIN}/api/oidc/token"
      userInfoUrl: "https://id.${SECRET_DOMAIN}/api/oidc/userinfo"
      redirectUrl: "https://tinyauth.${SECRET_DOMAIN}/api/oauth/callback/pocketid"
      scopes: "openid email profile groups"
      name: "Pocket-ID"
      # Allow insecure connections (self-signed certificates)
      insecure: false

# UI Customization
ui:
  # Custom title for login page
  title: "Tinyauth"
  # Background image URL for login page
  backgroundImage: ""
