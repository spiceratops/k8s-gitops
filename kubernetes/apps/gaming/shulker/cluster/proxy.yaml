---
apiVersion: shulkermc.io/v1alpha1
kind: ProxyFleet
metadata:
  name: minecraft-proxy
spec:
  clusterRef:
    name: minecraft-cluster
  replicas: 1
  service:
    type: LoadBalancer
    annotations:
      lbipam.cilium.io/ips: "${MINECRAFT_LB_IP}"
      coredns.io/hostname: minecraft.${PRIVATE_DOMAIN}
      reloader.stakater.com/auto: "true"
  template:
    spec:
      version:
        channel: Velocity
        name: latest
      config:
        proxyProtocol: true
